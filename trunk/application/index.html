<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Pharmer -- Smart Medical Prescription Writer</title>
	
	<link rel="stylesheet" href="libs/bootstrap/css/bootstrap.min.css" media="all" />
	<link rel="stylesheet" href="css/index.css" media="all" />
	<script type="text/javascript" src="js/index.js"></script>
	<script type="text/javascript" src="libs/jquery.min.js"></script>
	<script type="text/javascript" src="libs/jquery-tmpl/jquery.tmpl.min.js"></script>
	<script type="text/javascript" src="libs/bootstrap/js/bootstrap.min.js"></script>
</head>
<body class="bg" spellcheck="false">
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">Pharmer</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li><a href="#">Home</a></li>
              <li><a href="#about">About</a></li>
			  <li><a href="#demo" class="active">Demo</a></li>
              <li><a href="#contact">Contact</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

<br /><br /><br />
				
<br>
<div class="container">
	<div class="tabbable tabs-left">
		<ul class="nav nav-tabs offset1">
		<li class="active"><a data-toggle="tab" href="#edit">Write</a></li>
		<li><a data-toggle="tab" href="#presc_view">View</a></li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane active" id="edit">
				<div id="search_bar">
					<a class="btn btn-small" href="#" title="find all drugs" onclick="findAllDrugs();"><i class="icon-magnet"></i></a>
					<a class="btn btn-small" href="#" title="search for a specific drug" onclick="search_drug();"><i class="icon-search"></i></a>
					<input type="text" class="input-medium search-query hidden" id="search_term" placeholder="drug name">
					<span id="result_of_search"></span>
				</div>
				<div class="span7 img-rounded" id="presc_edit" contenteditable="true">
				
					Amoxicillin - 1 tab tds.
					<br>
					Acetaminophen - 2 caps nocte.
				</div>
			</div>
			<div class="tab-pane span7 img-rounded" id="presc_view">
			Here is your output!
			</div>			
		</div>
	</div>
</div>

<script>
$(function() {
	$("#presc_edit").keyup(function(event){
		if(event.keyCode == 190){ // when period '.' is pressed
			//console.log(event);
			realTimeTag();
		}
	});
	$("#search_term").keyup(function(event){
		if(event.keyCode == 13){ //when enter is pressed
			//console.log(event);
			handleSearch();
		}
	});	
	$("#presc_edit").bind('paste', function(e) {
		e.preventDefault();
			/*
			var el = $(this);
			setTimeout(function() {
				var text = $(el).val();
				refreshTooltips();
			}, 100);
			*/
	});

	refreshTooltips();
});
$(document).ajaxStart(function(){ 
    $('#ajax_progress_indicator').show();
});
$(document).ajaxStop(function(){ 
    $('#ajax_progress_indicator').hide();
});


</script>

<div id="ajax_progress_indicator" style="display:none;"><img src='img/ajax-loader.gif' alt=""/></div>
<script id="search_result" type="text/x-jquery-tmpl">
&nbsp;<span class="btn-group" id="searchid">
<button class="btn item-title-current">
${search_term}
</button>
<button class="btn btn-warning dropdown-toggle" data-toggle="dropdown">
<span class="caret"></span>
</button>
<ul class="dropdown-menu">
{{if hint!=''}}
	<li>
		<span class="item-title item-hint">{{html hint}}</span>
	</li>
	<li class="divider"></li>
{{/if}}
{{each(i, d) drugs}}
		<li>
			<a href="#" onclick="selectItem('searchid',this)"><span class="item-title"><b>${d.name}</b></span><br/><small>{{html d.description}}</small></a>
		</li>
		<li class="divider"></li>
{{/each}}	
</ul>
</span>&nbsp;				
</script>
</body>
	